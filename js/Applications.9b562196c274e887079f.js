(self.webpackChunksettings_frontend=self.webpackChunksettings_frontend||[]).push([[186],{82135:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ee,getAppId:()=>ge});var r,a=n(59713),o=n.n(a),c=n(63038),i=n.n(c),s=n(18029),u=n.n(s),l=n(31065),p=n.n(l),f=n(45697),d=n.n(f),m=n(14023),g=n(2168),v=n(14224),E=n(89583),h=n(40882),b=n(55206),O=n(3392),y=n(319),P=n.n(y),L=n(24350),j=n.n(L),S=n(94654),T=n.n(S)()(["GET_SCHEMA","SAVE_VALUES","GET_CONFIG"],(function(e){return[e,"".concat(e,"_PENDING"),"".concat(e,"_FULFILLED"),"".concat(e,"_REJECTED")]})),_=j()([].concat([],P()(T)),(function(e){return e}));function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const D={applicationsStore:(0,O.applyReducerHash)((r={},o()(r,_.GET_SCHEMA_FULFILLED,(function(e,t){var n=t.payload;return C(C({},e),{},{schema:n,loaded:!0})})),o()(r,_.GET_SCHEMA_PENDING,(function(e){return C(C({},e),{},{loaded:!1,schema:[]})})),o()(r,_.SAVE_VALUES_FULFILLED,(function(e){return C({},e)})),o()(r,_.GET_CONFIG_PENDING,(function(e){return C(C({},e),{},{appsConfig:{},configLoaded:!1})})),o()(r,_.GET_CONFIG_FULFILLED,(function(e,t){var n=t.payload;return C(C({},e),{},{appsConfig:n,configLoaded:!0})})),r),{loaded:!1,configLoaded:!1})};var I=n(81326),N=n(87757),A=n.n(N),k=n(48926),G=n.n(k),V=n(53663),F=n.n(V),x=n(93320);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){var e=G()(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F().get("".concat(insights.chrome.isBeta()?"/beta":"","/config/main.yml"));case 2:return t=e.sent,e.abrupt("return",(0,x.safeLoad)(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=G()(A().mark((function e(t){var n,r=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"v1",e.abrupt("return",F().get("/api/".concat(t,"/").concat(n,"/settings")));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=G()(A().mark((function e(t,n){var r,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:"v1",e.abrupt("return",F().post("/api/".concat(t,"/").concat(r,"/settings/"),R({},n)));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(e,t){return{type:_.GET_SCHEMA,payload:M(e,t)}},q=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Red Hat Insights";return{type:_.SAVE_VALUES,payload:Z(e,t,n),meta:{notifications:{fulfilled:{variant:"success",title:"Application settings saved",description:"Settings for ".concat(r," were replaced with new values."),dismissable:!0}}}}},X=n(6479),B=n.n(X),J=n(67154),K=n.n(J),Q=n(26196),W=n(6726),Y=n(81159),$=n(34023),ee=n(2095),te=n(85962),ne=n(63540),re=function(e){var t=e.text,n=e.linkProps,r=0,a=t.split(/<link>/).reduce((function(e,t){var a=t.split(/<\/link>/);return 2===a.length&&(a[0]=p().createElement(ne.Text,K()({key:"link-".concat(r),rel:"noreferrer noopener",className:"pf-u-ml-md",component:ne.TextVariants.a,target:"_blank"},n[r]),a[0]),r++),[].concat(P()(e),P()(a))}),[]);return p().createElement(ne.Text,{component:ne.TextVariants.p},a)};re.propTypes={text:d().string.isRequired,linkProps:d().arrayOf(d().object).isRequired};var ae=n(78267),oe=n(46182),ce=n(94330),ie=n(94637);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=ue(ue({},W.ZP),{},o()({"switch-field":W.ZP[oe.default.SWITCH],"textarea-field":W.ZP[oe.default.TEXTAREA],"select-field":W.ZP[oe.default.SELECT],"plain-text-with-links":re},oe.default.DUAL_LIST_SELECT,{component:W.ZP[oe.default.DUAL_LIST_SELECT],renderStatus:function(e){var t=e.selected,n=e.options;return"".concat(t," of ").concat(n," selected")}})),pe={"required-validator":ie.default[ce.default.REQUIRED],"pattern-validator":ie.default[ce.default.PATTERN],"min-length-validator":ie.default[ce.default.MIN_LENGTH],"url-validator":ie.default[ce.default.URL],"max-length-validator":ie.default[ce.default.MAX_LENGTH],"min-items-validator":ie.default[ce.default.MIN_ITEMS],"exact-length-validator":ie.default[ce.default.EXACT_LENGTH]},fe=function(e){return p().createElement(Q.ZP,K()({},e,{submitLabel:"Save",canReset:!0}))},de=function(e){var t=e.schemas,n=e.loaded,r=e.saveValues,a=B()(e,["schemas","loaded","saveValues"]);return p().createElement(Y.K,K()({},a,{gutter:"md"}),n?t.map((function(e,t){return p().createElement($.v,{key:"settings-form-".concat(t)},p().createElement(ee.Z,null,p().createElement(te.e,null,p().createElement(ae.Z,{componentMapper:le,FormTemplate:fe,schema:e,submitLabel:"Save",onSubmit:r,validatorMapper:pe}))))})):p().createElement($.v,null,p().createElement(ee.Z,null,p().createElement(te.e,null,p().createElement(g.Od,{size:"lg"})))))};de.propTypes={schemas:d().arrayOf(d().shape({})),loaded:d().bool,appId:d().string,saveValues:d().func},de.defaultProps={saveValues:function(){}};const me=de;var ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.params;return t&&t.id||""},ve=function(e){var t=e.appsConfig,n=e.saveValues,r=e.match,a=e.getSchema,o=e.getConfig,c=e.configLoaded,s=e.loaded,f=e.schema,d=t&&t[ge(r)]||ge(r),m=d.frontend&&d.frontend.title||d.title||d,O=(0,l.useState)(void 0),y=i()(O,2),P=y[0],L=y[1];return(0,l.useEffect)((function(){(0,b.z2)(D),(0,b.z2)({notifications:I.ZP}),t||o(),insights.chrome.auth.getUser().then((function(e){return L(e.identity.user.is_org_admin)}))}),[]),(0,l.useEffect)((function(){var e;d&&"string"!=typeof d&&a((null==d||null===(e=d.api)||void 0===e?void 0:e.apiName)||r.params.id,d.api)}),[d]),p().createElement(p().Fragment,null,p().createElement(v.mr,null,p().createElement(p().Fragment,null,p().createElement(v.BV,{title:P?"Applications settings":u()(m)}),P&&(c?p().createElement("p",{className:"pf-u-mt-sm"},"Settings for ".concat(u()(m))):p().createElement(g.Od,{size:"sm"})))),"boolean"==typeof P&&p().createElement(E.o,null,P?p().createElement(me,{loaded:s,schemas:f,saveValues:function(e){var t;return n((null==d||null===(t=d.api)||void 0===t?void 0:t.apiName)||r.params.id,e,d.api,d.title)}}):p().createElement(h.b,{serviceName:u()(m)})))};ve.propTypes={match:d().shape({params:d().shape({id:d().string})}),appsConfig:d().shape(o()({},d().string,d().shape({title:d().string,frontend:d().shape({title:d().string})}))),configLoaded:d().bool,getSchema:d().func,loaded:d().bool,saveValues:d().func,getConfig:d().func,schema:d().arrayOf(d().object)};const Ee=(0,m.connect)((function(e){var t=e.applicationsStore;return{schema:t&&t.schema,loaded:t&&t.loaded,appsConfig:t&&t.appsConfig,configLoaded:t&&t.configLoaded}}),(function(e){return{getConfig:function(){return e({type:_.GET_CONFIG,payload:H()})},getSchema:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{versions:[]},r=i()(n.versions,1),a=r[0];return e(z(t,a))},saveValues:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{versions:[]},a=i()(r.versions,1),o=a[0],c=arguments.length>3?arguments[3]:void 0;return e(q(t,n,o,c))}}}))(ve)}}]);
//# sourceMappingURL=Applications.9b562196c274e887079f.js.map